\documentclass[12pt, sumlimits, intlimits]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{hyperref}
\usepackage{lmodern, microtype}
\usepackage[margin=4cm, paper=a4paper]{geometry}
\usepackage[margin=2cm]{caption}
\usepackage{booktabs}
\usepackage{graphicx}

\usepackage{amsfonts, amsmath, amssymb}
\usepackage{mathtools}
\newcommand \twopi{{{\scriptstyle(2}\mskip-2.0mu\pi{\scriptstyle)}}}
\newcommand \ee{{\mathrm e}}
\newcommand \ii{{\mathrm i}}
\newcommand \full{{\mathrm d}}
\newcommand \fulld[1]{{\frac \full{\full {#1}}}}
\newcommand \partiald[1]{{\frac \partial{\partial {#1}}}}
\newcommand \yesnumber{\addtocounter{equation}{1}\tag \theequation}

\usepackage{listings}
\lstset{basicstyle=\footnotesize\ttfamily, tabsize=2}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{refs.bib}

\title{ECMI Modelling Week 2018 \\ Storing Your Random Objects}
\author{Desiré Nilsson \\ Lund University \\
\texttt{nat14dni@student.lu.se} \and
Ivana Gengeljacki \\ University of Novi Sad \\
\texttt{tim3ivana@gmail.com} \and
Jacob Hansen \\ Technical University of Denmark \\
\texttt{jacobjonhansen@gmail.com} \and
Kirill Kiselev \\ Saint Petersburg Polytechnic University \\
\texttt{kvladimirovich10@gmail.com} \and
Monika Žunji \\ University of Novi Sad \\
\texttt{zunjimonika@gmail.com} \and
Sampsa Kiiskinen \\ University of Jyväskylä \\
\texttt{tuplanolla@gmail.com}}
\date{2018-07-15 -- 2018-07-21}

\begin{document}

\maketitle

\section*{Abstract}
%Do we need one? Do we want one?

\section{Introduction}

Packing spheres is well-established \cite{conway-1998},
but by no means trivial \cite{torquato-2000}.

Words that reference figure \ref{f/btr} go here.

\begin{figure}
\centering
\def \w{0.25\columnwidth}
\includegraphics[width=\w]{btr-0}%
\includegraphics[width=\w]{btr-1}%
\includegraphics[width=\w]{btr-2}%
\includegraphics[width=\w]{btr-3} \\
\includegraphics[width=\w]{btr-4}%
\includegraphics[width=\w]{btr-5}%
\includegraphics[width=\w]{btr-6}%
\includegraphics[width=\w]{btr-7} \\
\includegraphics[width=\w]{btr-8}%
\includegraphics[width=\w]{btr-9}%
\includegraphics[width=\w]{btr-10}%
\includegraphics[width=\w]{btr-11} \\
\caption{Sketch of the bottom-to-top reconstruction algorithm.}
\label{f/btr}
\end{figure}

\section{Problem background}
The problem with storing random objects is encountered already in childhood as when cleaning one would have to put building blocks of different sizes and shapes in a box for storing. If individually organized little space will be wasted in the container and the lid of the box will most likely easily close. But saving time, most would not organize the blocks but just throw them in, and this poses an interesting problem, will the blocks fit inside the container so that the lid will close properly?
To study this question one would like to know what the packing density of the container is when the content is put in randomly.

The packing density is likely dependant on a variety of properties. Among other things the shape of the object put in it, the shape of the container and the sizes of the object, both in comparison to each other and to the container. When all objects are completely round is an well studied problem, therefore this report aims to study other shapes.
To simplify the problem, only objects of the same shape is considered, cubes. Further simplification is reducing from 3D to 2D, leaving the objects to be squares.
The assumption that the container will not move is made. When packing a box of randomly oriented objects that does not really fit, one would probably shake it to rearrange the configuration. This changes the problem and add complexity, it will therefor not be addressed.

%Discuss difficulties?
Originating from the solution with balls the biggest difference is that the orientation of the ball when it falls into the container does not affect the result. But for cubes, the orientation in all three dimensions matters, as ignoring it will lead to physically impossible configurations.

\section{Notes and Drafts}

We decided to start with a bottom-to-top reconstruction algorithm used
for granular dynamics \cite{poschel-2005},
but specialize it for rectangular particles.

\subsection{Bottom-to-Top Reconstruction}
First square will land on the bottom. If landing flat on one side, it is in a stable condition and the square is fixed at its position. If at all tilted when landing, only one corner of the square is supported which is not a stable state. It will therefor tilt in the direction of the center of mass, in the unlikely event that the center of mass is exactly above the supported corner, the direction doesn't matter. It will continue to tilt until it is stable which could happens in two ways. Either it falls on its side or it hits the wall of the container and stays tilted, supported by one point on the bottom and one on the container wall. This is also a stable state and it will thereafter stay fixed.
%Picture of possible outcomes, one square flat on bottom, one tilted against the wall?

Second square is the same procedure if not in contact with the first. Otherwise many possible outcomes occurs. If the first square is flat, landing with one side flat on the first square could be stable if the center of mass is inside the contact with the first square, if so it is fixed. If not the second square will tilt around the corner of the first square until another point is in contact with the wall or the sides of the squares are connected. It will then continue to tilt, still with the corner of the second square in contact with the side of the first. This will continue until it two points of contact is reached.
%Picture of tilting process?
If landing in contact with the flat first square with an angle it will behave as landing on the bottom, it will tilt in the direction of the center of mass. When having a flat contact it will behave as already described above.
When the first cube is not flat, but instead tilted against the wall, the same procedure as above is performed, tilting against the center of the mass. This might have to be done a few more times but the principle is the same.

Adding more squares is mostly repeating the same rules, with the difference that with more squares the landscape to which the squares are falling changes and more squares are in contact with each other leading to other possible stable states. 



%What is the big picture (outline)?

\subsection{Line Intersection}

The intersection of two lines in a plane is easily obtained by solving
\begin{align*}
  X_1 + t_1 E_1 & = X_2 + t_2 E_2
  \yesnumber
\end{align*}
where $X$ are the positions (start vertices),
$E$ are the normalized direction vectors (vertex differences) and
$t$ are free.
If the lines are segments,
they intersect whenever $0 \le t_i \le 1$ for all $i$.
There also exists a three-dimensional generalization,
which yields the points,
where the two lines are the closest.

\subsection{Pivot Selection}

How to select the pivot?

\subsection{Rotation}

The rotation matrix around the origin
in the plane spanned by the first two dimensions is
\begin{align*}
  R (\theta) & =
  \begin{bmatrix}
    \cos \theta & -\sin \theta \\
    \sin \theta & \cos \theta
  \end{bmatrix}
  \yesnumber
\end{align*}
where $\theta$ is the angle.
In order to rotate around an arbitrary point,
we need to extend this to an affine transformation.
The familiar way is to use homogeneous coordinates.
We thus define the rotation matrix
\begin{align*}
  R' (\theta) & =
  \begin{bmatrix}
    \cos \theta & -\sin \theta & 0 \\
    \sin \theta & \cos \theta & 0 \\
    0 & 0 & 1
  \end{bmatrix}
  \yesnumber
\end{align*}
and the translation matrix
\begin{align*}
  T (x) & =
  \begin{bmatrix}
    1 & 0 & x_1 \\
    0 & 1 & x_2 \\
    0 & 0 & 1
  \end{bmatrix}.
  \yesnumber
\end{align*}
Composing them gives the matrix for a rotation around a point,
which we shall refer to as pivoting,
\begin{align*}
  P (x, \theta) & = T (x) R (\theta) T (-x).
  \yesnumber
\end{align*}

\subsection{Order Metrics}

In physics parlance,
quantitative ways to measure randomness
in a system are called order metrics.
There are various kinds \cite{torquato-2002}.
Alas, most assume the system consists of point particles,
features bonds (chemical or otherwise) or
tends to arrange into a known set of crystal structures.
Our system does not have these properties,
so we cannot employ them directly.

The best option we could lift from physics is
the two-body excess entropy \cite{truskett-2000},
which has the dimensionless form
\begin{align*}
  \frac S{k^{\mathrm B}} & = -\frac 1 2 \Big(\frac N V\Big)
  \int_0^\infty \fulld r \big(g \log g - (g - 1)\big),
  \label{e/entropy} \yesnumber
\end{align*}
where $N$ is the number of particles,
$V$ is the total volume of the ambient space,
$g$ is the radial distribution function parametrized
by the distance $r$ (obtainable
through weighted kernel density estimation \cite{kiiskinen-2018}) and
$k^{\mathrm B}$ is the Boltzmann constant.
However, this does not consider the orientation of the bodies.
To do that,
we could use the orientational correlation function \cite{donev-2006},
but it is not obvious how to incorporate it yet.

While the (unnormalized) radial correlation function says
\begin{align*}
  g_2 (r) & = \langle\delta (r - r')\rangle_{r'},
  \label{e/radial} \yesnumber
\end{align*}
the orientational correlation function
\begin{align*}
  g_m (r) & = \langle\cos m (\theta - \theta')\rangle_{\theta'},
  \label{e/angular} \yesnumber
\end{align*}
where $m$ is the degree of the symmetries (as in \cite{donev-2006}).
We conjecture that for squares $m = 4$ and for rectangles $m = 2$.
More is in \cite{saintillan-2007} and \cite{stoyan-1991}.
Unfortunately combining these is not discussed anywhere.
This looks very promising \cite{jiao-2011}.

Proper collision prediction seems to be a hard problem,
as indicated by recent publications \cite{kim-2003}.

\printbibliography

\end{document}
